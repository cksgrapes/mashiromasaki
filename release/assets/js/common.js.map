{"version":3,"sources":["common.js"],"names":["ETHER","d","document","w","window","$window","$","$body","common","init","setMasonry","setToggleMenu","setChangeFontSize","setTypesetting","resize","on","setIsMobile","setMenuScroll","scroll","scrollTop","width","innerWidth","isMobile","perfectScrollbar","area","$area","button","getElementsByClassName","activeCls","len","length","i","addEventListener","toggleClass","toggleOpenClose","this","parentNode","class","classList","contains","removeClass","addClass","event","target","closest","trigger","panelID","getAttribute","panel","getElementById","substr","$panel","e","preventDefault","match","work","$p","find","innerHTML","index","container","$container","masonry","itemSelector","columnWidth","gutter","percentPosition","infinitescroll","navSelector","nextSelector","contentSelector","dataType","loading","msgText","finishedMsg","selector","speed","newElements","$newElems"],"mappings":"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","file":"common.js","sourcesContent":["'use strict';\n\nvar ETHER = ETHER || {\n    d       : document,\n    w       : window,\n    $window : $(window),\n    $body   : $('body')\n  };\n\n(function(common){\n  common.init = function() {\n    setMasonry();\n    // setAnchor();\n    setToggleMenu();\n    setChangeFontSize();\n    setTypesetting();\n  };\n\n  common.resize = function() {\n    ETHER.$window.on('load resize', function(){\n      setIsMobile();\n      setMenuScroll();\n    });\n  };\n\n  common.scroll = function() {\n    ETHER.$window.on('scroll', function(){\n      ETHER.scroll = ETHER.$window.scrollTop();\n    });\n  };\n\n  var setIsMobile = function() {\n    var width = ETHER.w.innerWidth;\n    ETHER.isMobile = (width < 768) ? true : false;\n  };\n\n\n  var setMenuScroll = function() {\n    $('.toggleContents').perfectScrollbar();\n  };\n\n  var setToggleMenu = function() {\n    var button = ETHER.d.getElementsByClassName('js-toggleMenu'),\n        activeCls = 'active',\n        area,\n        $area;\n    button.len = button.length;\n\n    var init = function() {\n      for (var i = 0; i < button.len; i++) {\n        button[i].addEventListener('click', toggleClass, false);\n      }\n      ETHER.d.addEventListener('click', toggleOpenClose, false);\n    };\n\n    var toggleClass = function() {\n      area       = this.parentNode;\n      $area      = $(area);\n      area.class = area.classList;\n      if (area.class.contains(activeCls)) {\n        $(area).removeClass(activeCls);\n      } else {\n        $(area).addClass(activeCls);\n      }\n    };\n\n    var toggleOpenClose = function() {\n      if ($(event.target).closest(area).length < 1) {\n        for (var i = 0; i < button.len; i++) {\n          if (button[i].parentNode.classList.contains('active')) {\n            $(button[i]).trigger('click');\n          }\n        }\n      }\n    };\n\n    init();\n  };\n\n  var setChangeFontSize = function() {\n    var button  = ETHER.d.getElementsByClassName('js-changeFontSize'),\n        panelID = button[0].getAttribute('href'),\n        panel   = ETHER.d.getElementById(panelID.substr(1)),\n        $panel = $(panel);\n    button[0].addEventListener('click', function(e){\n      e.preventDefault();\n      if (panel.classList.contains('active')) {\n        $panel.removeClass('active');\n      } else {\n        $panel.addClass('active');\n      }\n    }, false);\n\n    ETHER.d.addEventListener('click', function(){\n      if ($(event.target).closest(panel).length < 1) {\n        $(button[0]).trigger('click');\n      }\n    }, false)\n  };\n\n  var setTypesetting = function() {\n    var work  = ETHER.d.getElementsByClassName('work'),\n        $p    = $(work[0]).find('.work_content>p'),\n        len   = $p.length,\n        match;\n    if (work.length < 1) {\n      return;\n    }\n    for (var i = 0; i < len; i++) {\n      match = $p[i].innerHTML.match(/[「（]/);\n      if (match !== null && match.index === 0) {\n        $($p[i]).addClass('noIndent');\n      }\n    }\n  };\n\n  var setMasonry = function() {\n    var container = ETHER.d.getElementsByClassName('masonry');\n    if (container.length < 1) {\n      return;\n    }\n    var $container = $(container);\n    $container.masonry({\n      itemSelector: '.col',\n      columnWidth: '.columnSizer',\n      gutter: '.columnGutter',\n      percentPosition: true\n    });\n    $container.infinitescroll({\n      navSelector  : '.navigation',\n      nextSelector : '.navigation a',\n      itemSelector : '.col',\n      contentSelector : '.column',\n      dataType: 'php',\n      loading: {\n        msgText: '<div class=\"loading\"><i class=\"fa fa-spinner\" aria-hidden=\"true\"></i></div>',\n        finishedMsg: '',\n        selector: '.main',\n        speed: 1\n      }\n    },\n    function( newElements ) {\n      var $newElems = $( newElements );\n      $container.masonry( 'appended', $newElems, true );\n    });\n  };\n\n  var setAnchor = function(offset) {\n    var offset = offset || 0,\n        trg,\n        trgpos;\n    $('a[href^=\"#\"]').each(function() {\n      $(this).on('click',function(e) {\n        e.preventDefault();\n        trg = $(this).attr('href');\n        console.log($(trg).offset().top);\n        trgpos = trg != '#pagetop' && $(trg).offset().top;\n\n        if (trg == '#pagetop') { $('html,body').animate({scrollTop: 0}, 500); }\n        $('html,body').animate({scrollTop: (trgpos - offset - 113)}, 500);\n      });\n    });\n  };\n\n})(ETHER.common = ETHER.common || {});\n\nETHER.common.init();\nETHER.common.resize();\nETHER.common.scroll();\n\n\n"]}